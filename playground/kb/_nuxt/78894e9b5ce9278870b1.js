(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{356:function(t,n,e){"use strict";e.r(n);var d=e(3),o=(e(75),e(30)),r={layout:"admin-inside",data:function(){return{bidang_studi:{id_kat_bidang_studi:"",nama_bidang_studi:"",path_icon:"avatar.png",selectedFiles:void 0},fileUpload:"",notification_unread:[],kat_bidang_studi:[]}},mounted:function(){var t=this;this.$axios.get("/api/v/1/bidstud/find/".concat(this.$route.params.id)).then((function(n){t.bidang_studi.nama_bidang_studi=n.data.data.nama_bidang_studi,t.bidang_studi.id_kat_bidang_studi=n.data.data.id_kat_bidang_studi,t.bidang_studi.path_icon=n.data.data.path_icon})).catch((function(t){console.log(t.response.data)})),this.$axios.get("/api/v/1/mstkatbidstud/findall").then((function(n){t.kat_bidang_studi=n.data.data})).catch((function(t){console.log(t.response.data)})),this.$axios.get("/api/v/1/notif/foradmin/unread").then((function(n){t.notification_unread=n.data.data})).catch((function(t){console.log(t.response.data)}))},methods:{onFileChange:function(t){console.log(this.bidang_studi.path_icon);var n=t.target.files[0];this.bidang_studi.path_icon=URL.createObjectURL(n),this.selectedFiles=this.$refs.file.files},upload:function(t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var e,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("test line 99"),(e=new FormData).append("icon",n.selectedFiles.item(0)),t.prev=3,t.next=6,n.$axios.post("/api/v/1/bidstud/icon",e,{headers:{"Content-Type":"multipart/form-data"}});case 6:d=t.sent,console.log(" output >>>> ",d),n.fileUpload=d.data.data[0].path_photo,n.$router.push({path:"/admin/master/bidangstudi/".concat(n.$route.params.id)}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,12]])})))()},save:function(t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n.bidang_studi.path_icon),console.log(n.fileUpload),e.next=5,n.$axios.put("/api/v/1/bidstud/update/".concat(n.$route.params.id),Object(d.a)({nama_bidang_studi:n.bidang_studi.nama_bidang_studi,id_kat_bidang_studi:n.bidang_studi.id_kat_bidang_studi,path_icon:n.bidang_studi.path_icon},"path_icon",n.fileUpload)).then((function(){n.$router.push("/admin/master/bidangstudi/")})).catch((function(t){console.log(t)}));case 5:case"end":return e.stop()}}),e)})))()}}},c=e(33),component=Object(c.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"users-wrap"},[e("div",{staticClass:"lonceng"},[e("b-button",{attrs:{variant:"default",to:"/admin/notification"}},[e("b-icon",{attrs:{icon:"bell"}}),t.notification_unread.length?e("b-badge",{attrs:{variant:"danger"}},[t._v(t._s(t.notification_unread.length))]):t._e()],1)],1),t._v(" "),e("b-row",[e("b-col",{attrs:{md:"8"}},[e("h4",[e("b-icon",{attrs:{icon:"person"}}),t._v(" Update Bidang Studi")],1)]),t._v(" "),e("b-col",{staticClass:"text-right",attrs:{md:"4"}},[e("b-button",{attrs:{pill:"",variant:"info",to:"/admin/master/bidangstudi/"}},[e("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back")],1)],1)],1),t._v(" "),e("b-container",{staticClass:"mt-5",attrs:{fluid:""}},[e("b-card",[e("b-row",[e("b-col",{attrs:{md:"6","offset-md":"3"}},[e("b-card",[e("div",{staticClass:"text-center",on:{click:function(n){return t.$refs.file.click()}}},[e("b-img",{staticStyle:{cursor:"pointer"},attrs:{center:"",src:t.bidang_studi.path_icon,rounded:"circle",alt:"Icon",width:"80",height:"80"}}),t._v(" "),e("b-img",{staticStyle:{cursor:"pointer","margin-top":"-80px"},attrs:{center:"",src:t.$axios.defaults.baseURL+"/"+t.bidang_studi.path_icon,rounded:"circle",alt:"_",width:"80",height:"80"}}),t._v(" "),e("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",required:""},on:{change:t.onFileChange}}),e("br"),t._v(" "),e("p",{staticClass:"small"},[t._v("Click image to browse image from your local computer")])],1),t._v(" "),e("b-form-group",{staticClass:"mt-4 text-center"},[e("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.upload}},[t._v("Upload")])],1)],1),t._v(" "),e("br"),t._v(" "),e("b-form",{staticClass:"mt-5",on:{submit:t.save}},[e("b-form-group",{attrs:{id:"input-group-1",label:"Nama Bidang Studi:","label-for":"bidang_studi"}},[e("b-form-input",{attrs:{id:"bidang_studi",required:""},model:{value:t.bidang_studi.nama_bidang_studi,callback:function(n){t.$set(t.bidang_studi,"nama_bidang_studi",n)},expression:"bidang_studi.nama_bidang_studi"}})],1),t._v(" "),e("b-form-group",{attrs:{id:"input-group-2",label:"Kategori Bidang Studi:","label-for":"bidang_studi"}},[e("b-form-select",{attrs:{options:t.kat_bidang_studi,"value-field":"id_kat_bidang_studi","text-field":"nama_kat_bidang_studi",required:""},model:{value:t.bidang_studi.id_kat_bidang_studi,callback:function(n){t.$set(t.bidang_studi,"id_kat_bidang_studi",n)},expression:"bidang_studi.id_kat_bidang_studi"}})],1),t._v(" "),e("b-form-group",{staticClass:"mt-4 text-right"},[e("b-button",{attrs:{type:"submit"}},[t._v("Save")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);n.default=component.exports}}]);